(()=>{"use strict";const e=window.React,o=window.wp.i18n,t=window.wc.wcBlocksRegistry,r=window.wp.htmlEntities,c=window.wc.wcSettings,m=(window.wp.components,window.wp.blocks,(0,c.getSetting)("mesomb_data",{})),n=(0,o.__)("MeSomb Payments","woo-gutenberg-products-block"),s={MTN:(0,o.__)("Mobile Money Number","mesomb-for-woocommerce"),ORANGE:(0,o.__)("Orange Money Number","mesomb-for-woocommerce"),AIRTEL:(0,o.__)("Airtel Money Number","mesomb-for-woocommerce")},a={CM:(0,o.__)("Cameroon","mesomb-for-woocommerce"),NE:(0,o.__)("Niger","mesomb-for-woocommerce")},l=(0,r.decodeEntities)(m.title)||n,i=t=>{var r;const[c,n]=(0,e.useState)(""),[l,i]=(0,e.useState)(""),[p,d]=(0,e.useState)(1==m.countries.length?m.countries[0]:""),[u,w]=(0,e.useState)(!1),{eventRegistration:b,emitResponse:_}=t,{onPaymentProcessing:h}=b;return console.log(m),(0,e.useEffect)((()=>{const e=h((async()=>{let e="",t=!0;return p.length?l.length?c.length||(e=(0,o.__)("You must enter the payment number","mesomb-for-woocommerce"),t=!1):(e=(0,o.__)("You must select your payment provider","mesomb-for-woocommerce"),t=!1):(e=(0,o.__)("You must select the country of the payment","mesomb-for-woocommerce"),t=!1),t?(w(!0),setTimeout((()=>{w(!1)}),6e3),{type:_.responseTypes.SUCCESS,meta:{paymentMethodData:{service:l,payer:c}}}):{type:_.responseTypes.ERROR,message:e}}));return()=>{e()}}),[_.responseTypes.ERROR,_.responseTypes.SUCCESS,h,c,l]),(0,e.createElement)("div",null,m.countries.length>1&&(0,e.createElement)("div",{className:"wc-blocks-components-select"},(0,e.createElement)("div",{className:"wc-blocks-components-select__container"},(0,e.createElement)("label",{htmlFor:`${m.id}-service`,className:"wc-blocks-components-select__label"},(0,o.__)("Country","mesomb-for-woocommerce")),(0,e.createElement)("select",{name:"service",className:"wc-blocks-components-select__select",id:`${m.id}-service`,"aria-invalid":"false",required:!0,onChange:e=>d(e.target.value)},(0,e.createElement)("option",null,(0,o.__)("Select Country","mesomb-for-woocommerce")),m.countries.map((o=>(0,e.createElement)("option",{value:o},a[o])))),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"wc-blocks-components-select__expand","aria-hidden":"true",focusable:"false"},(0,e.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))),(0,e.createElement)("div",{className:"wc-blocks-components-select"},(0,e.createElement)("div",{className:"wc-blocks-components-select__container"},(0,e.createElement)("label",{htmlFor:`${m.id}-service`,className:"wc-blocks-components-select__label"},(0,o.__)("Service Provider","mesomb-for-woocommerce")),(0,e.createElement)("select",{name:"service",className:"wc-blocks-components-select__select",id:`${m.id}-service`,"aria-invalid":"false",required:!0,onChange:e=>i(e.target.value)},(0,e.createElement)("option",null,(0,o.__)("Select Mobile Operator","mesomb-for-woocommerce")),m.providers.filter((e=>e.countries.includes(p))).map((o=>(0,e.createElement)("option",{value:o.key},o.name)))),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"wc-blocks-components-select__expand","aria-hidden":"true",focusable:"false"},(0,e.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))),(0,e.createElement)("div",{className:"wc-block-components-text-input is-active"},(0,e.createElement)("input",{placeholder:null!==(r=s[l])&&void 0!==r?r:(0,o.__)("Phone Number","mesomb-for-woocommerce"),type:"tel",name:"payer",id:`${m.id}-payer`,maxLength:"9",required:!0,onChange:e=>n(e.target.value)}),(0,e.createElement)("label",{htmlFor:`${m.id}-payer`},(0,o.__)("Phone Number","mesomb-for-woocommerce"))),u&&(0,e.createElement)("div",{className:"alert alert-success",role:"alert",id:"mesomb-alert",style:{marginTop:"10px",position:"relative",padding:".5rem 1.25rem",marginBottom:"1rem",border:"1px solid transparent",borderRadius:".25rem",color:"#155724",backgroundColor:"#d4edda",borderColor:"#c3e6cb"}},(0,e.createElement)("h4",{style:{marginTop:"0px",marginBottom:"5px"}},(0,o.__)("Check your phone","mesomb-for-woocommerce")),(0,e.createElement)("p",{style:{marginBottom:"5px"}},(0,o.__)("Please check your phone to validate payment from Hachther SARL or MeSomb","mesomb-for-woocommerce"))))},p={name:"mesomb",label:(0,e.createElement)((o=>{const{PaymentMethodLabel:t}=o.components;return(0,e.createElement)("div",null,(0,e.createElement)(t,{text:l}),(0,e.createElement)("img",{style:{marginLeft:5},src:m.icon,alt:"MeSomb"}))}),null),content:(0,e.createElement)(i,null),edit:(0,e.createElement)(i,null),canMakePayment:()=>!0,ariaLabel:l,supports:{features:m.supports,showSavedCards:!1,showSaveOption:!1}};(0,t.registerPaymentMethod)(p)})();